<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Time & Pay Calculator â€” Pro</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container" id="appRoot">
    <header class="topbar">
      <h1>Time &amp; Pay Calculator</h1>
      <div class="top-actions">
        <label class="auto-label"><input id="autoTheme" type="checkbox"> Auto</label>
        <label class="switch">
          <input id="darkMode" type="checkbox">
          <span class="slider"></span>
        </label>
        <span class="switch-label">Dark</span>
      </div>
    </header>
    <!-- body same as before ... shortened for brevity -->
<script>
(function(){
  const $ = s => document.querySelector(s);
  const darkMode = $('#darkMode');
  const LS_UI = 'tpc.ui.v1';
  function saveJSON(k,v){ localStorage.setItem(k, JSON.stringify(v)); }
  function loadJSON(k, fb){ try{ const v = JSON.parse(localStorage.getItem(k)||''); return v ?? fb; } catch(e){ return fb; } }

  function applyTheme(){
    const ui = loadJSON(LS_UI, {});
    let dark = ui.dark;
    if(dark===undefined){ // no pref saved
      dark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    }
    document.documentElement.dataset.theme = dark ? 'dark' : 'light';
    darkMode.checked = !!dark;
  }
  function setDark(val){
    const ui = loadJSON(LS_UI, {});
    ui.dark = !!val;
    saveJSON(LS_UI, ui);
    applyTheme();
  }
  darkMode.addEventListener('change', e=> setDark(e.target.checked));
  applyTheme();
})();</script>
</body>
</html>
